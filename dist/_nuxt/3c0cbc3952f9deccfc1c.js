(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{370:function(e,r,t){"use strict";t.r(r);t(41);var n,o=t(11),l=t(83),c={asyncData:function(e){var r=e.$axios,t=e.$auth,n=e.redirect;return r.$get("/admin/profile").then((function(e){return console.log(e.profile),{email:e.profile.email,fullname:e.profile.fullname,image:e.profile.image,birthday:e.profile.birthday,username:e.profile.username,website:e.profile.website,biography:e.profile.biography,sending:!1,error:!1,success:!1}})).catch(function(){var e=Object(o.a)(regeneratorRuntime.mark((function e(r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.logout();case 2:n(302,"/login");case 3:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}())},components:{ValidationProvider:l.b,ValidationObserver:l.a},methods:{submit:(n=Object(o.a)(regeneratorRuntime.mark((function e(){var r=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$refs.observer.validate();case 2:e.sent||console.error("error form required"),this.sending=!0,this.$axios.post("/admin/user/profile/update",{email:this.email,fullname:this.fullname,image:this.image,birthday:this.birthday,username:this.username,website:this.website,biography:this.biography}).then((function(e){r.sending=!1,e.data.err?r.error=!0:r.success=!0})).catch((function(e){r.sending=!1,r.error=!0})),requestAnimationFrame((function(){r.$refs.observer.reset()}));case 7:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})}},m=t(30),component=Object(m.a)(c,(function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"container mt-5"},[t("ValidationObserver",{ref:"observer",attrs:{tag:"form"},scopedSlots:e._u([{key:"default",fn:function(r){r.valid;return[t("b-form",{on:{submit:function(r){return r.preventDefault(),e.submit()}}},[t("ValidationProvider",{attrs:{name:"photo",rules:"required"},scopedSlots:e._u([{key:"default",fn:function(r){var n=r.errors;return[t("b-form-group",{attrs:{"label-for":"link-input",label:"Photo de votre profile liens:",description:"http://google.com"}},[t("b-form-input",{attrs:{id:"link-input",placeholder:"http://www.myphotolink.xcom"},model:{value:e.image,callback:function(r){e.image=r},expression:"image"}}),e._v(" "),t("span",{staticClass:"text-danger small"},[e._v(e._s(n[0]))])],1)]}}],null,!0)}),e._v(" "),t("ValidationProvider",{attrs:{name:"nom complet",rules:"required"},scopedSlots:e._u([{key:"default",fn:function(r){var n=r.errors;return[t("b-form-group",{attrs:{"label-for":"fullname-input",label:"Nom complet:"}},[t("b-form-input",{attrs:{id:"fullname-input"},model:{value:e.fullname,callback:function(r){e.fullname=r},expression:"fullname"}}),e._v(" "),t("span",{staticClass:"text-danger small"},[e._v(e._s(n[0]))])],1)]}}],null,!0)}),e._v(" "),t("ValidationProvider",{attrs:{name:"pseudo",rules:"required"},scopedSlots:e._u([{key:"default",fn:function(r){var n=r.errors;return[t("b-form-group",{attrs:{"label-for":"username-input",label:"Pseudo:"}},[t("b-form-input",{attrs:{id:"username-input"},model:{value:e.username,callback:function(r){e.username=r},expression:"username"}}),e._v(" "),t("span",{staticClass:"text-danger small"},[e._v(e._s(n[0]))])],1)]}}],null,!0)}),e._v(" "),t("ValidationProvider",{attrs:{name:"birthday",rules:"required"},scopedSlots:e._u([{key:"default",fn:function(r){var n=r.errors;return[t("b-form-group",{attrs:{"label-for":"birthday-input",label:"Date de naissance:",description:"format flexible."}},[t("b-form-input",{attrs:{id:"birthday-input",placeholder:"05/05/5555"},model:{value:e.birthday,callback:function(r){e.birthday=r},expression:"birthday"}}),e._v(" "),t("span",{staticClass:"text-danger small"},[e._v(e._s(n[0]))])],1)]}}],null,!0)}),e._v(" "),t("ValidationProvider",{attrs:{name:"email",rules:"required|email"},scopedSlots:e._u([{key:"default",fn:function(r){var n=r.errors;return[t("b-form-group",{attrs:{"label-for":"email-input",label:"Adresse email:"}},[t("b-form-input",{attrs:{id:"email-input",placeholder:"Email"},model:{value:e.email,callback:function(r){e.email=r},expression:"email"}}),e._v(" "),t("span",{staticClass:"text-danger small"},[e._v(e._s(n[0]))])],1)]}}],null,!0)}),e._v(" "),t("ValidationProvider",{attrs:{name:"web url",rules:"required"},scopedSlots:e._u([{key:"default",fn:function(r){var n=r.errors;return[t("b-form-group",{attrs:{"label-for":"url-input",label:"Web url:",description:"Liens de votre profile Facebook, LinkedIn... Respect this convention <a href='http://google.com'>google</a>"}},[t("b-form-input",{attrs:{id:"url-input",placeholder:"http://google.com"},model:{value:e.website,callback:function(r){e.website=r},expression:"website"}}),e._v(" "),t("span",{staticClass:"text-danger small"},[e._v(e._s(n[0]))])],1)]}}],null,!0)}),e._v(" "),t("b-form-group",{attrs:{"label-for":"textarea-input",label:"Biographie:"}},[t("b-form-textarea",{attrs:{id:"textarea-input",placeholder:"Ecrire quelque chose sur vous...",rows:"3","max-rows":"6"},model:{value:e.biography,callback:function(r){e.biography=r},expression:"biography"}})],1),e._v(" "),t("b-alert",{attrs:{variant:"success",show:e.success}},[e._v("Data success sync !")]),e._v(" "),t("b-alert",{attrs:{show:e.error,variant:"danger"}},[e._v("Error data sync ! ")]),e._v(" "),t("b-button",{attrs:{type:"submit",variant:"primary"}},[e.sending?t("span",[t("b-spinner",{attrs:{small:"",type:"grow"}}),e._v("\n                      In process...\n                  ")],1):t("span",[e._v("\n                      Update\n                  ")])])],1)]}}])})],1)}),[],!1,null,null,null);r.default=component.exports}}]);